# Cosmic Clicker Project Memory

## File Structure (as of roadmap creation)

- .bolt/ — (unknown, possibly build or config)
- dist/ — Build output
- public/
  - click-sound.mp3 — Click sound effect
  - nebula-background.svg — Nebula background image
- src/
  - App.tsx — Main app entry
  - main.tsx — React entry point
  - index.css — Global styles
  - vite-env.d.ts — Vite/TypeScript types
  - components/
    - Background.tsx — Animated background (stars, meteors)
    - ClickFeedback.tsx — Click feedback animation
    - GalaxyClicker.tsx — Main clicker button and animation
    - Game.tsx — Main game layout and panel arrangement
    - RushEventAnimation.tsx — Rush event visual effects
    - StarParticles.tsx — Star/falling particle animation
    - StardustCounter.tsx — Stardust and passive income display
    - StatsPanel.tsx — Game stats and upgrade levels
    - UpgradeItem.tsx — Single upgrade display
    - UpgradesPanel.tsx — Upgrades tab/panel
  - context/
    - GameContext.tsx — Game state, upgrades, events
  - utils/
    - (gameUtils and other helpers)
- index.html — Main HTML entry
- package.json — Project dependencies
- package-lock.json — Dependency lockfile
- tailwind.config.js — Tailwind CSS config
- vite.config.ts — Vite config
- tsconfig*.json — TypeScript configs
- roadmap.md — Project roadmap and goals
- memory.md — (this file)

## Key Notes
- Main gameplay is in `src/components/Game.tsx` and `GalaxyClicker.tsx`.
- Upgrades and rush events are managed in `GameContext.tsx`.
- Visual/UI issues (e.g., weird box) may be caused by containers in `Game.tsx`, `GalaxyClicker.tsx`, or background overlays.
- Rush events and event chance upgrades are planned for future milestones.
- The key for active events in RushEventsPanel.tsx now uses event.id + '-' + event.startedAt to prevent duplicate key warnings.
- All major changes should be committed to the [SK-Digital/cosmic-clicker](https://github.com/SK-Digital/cosmic-clicker) repo.

---

Update this file whenever the file structure or major project details change. 

- Updated `Background.tsx` to improve the falling star animation with smoother transitions.
- Adjusted z-index and layout in `Game.tsx` to resolve the weird box issue by ensuring proper layering of elements.
- Fixed meteor (falling star) animation in `Background.tsx` to use the correct animation class and improved the visual style for a more realistic shooting star effect.
- Updated `StardustCounter.tsx` to make the resource panel less boxy and better blended with the background. 

# Project File Structure (as of latest update)

- .git/
- .gitattributes
- .gitignore
- dist/
- eslint.config.js
- index.html
- memory.md
- package-lock.json
- package.json
- postcss.config.js
- public/
- roadmap.md
- src/
  - App.tsx
  - components/
    - Background.tsx  # Contains star and meteor (falling star) animation logic
    - ClickFeedback.tsx
    - GalaxyClicker.tsx
    - RushEventAnimation.tsx
    - StarParticles.tsx
    - StardustCounter.tsx
    - StatsPanel.tsx
    - UpgradeItem.tsx
    - UpgradesPanel.tsx
    - Game.tsx
  - context/
  - index.css         # Contains animation keyframes and utility classes
  - main.tsx
  - utils/
    - gameUtils.ts    # Contains generateRandomStars and generateRandomMeteors
  - vite-env.d.ts
- tailwind.config.js
- tsconfig.app.json
- tsconfig.json
- tsconfig.node.json
- vite.config.ts

# Playwright
- Playwright is installed as a dependency (@playwright/test), and a basic Playwright config (playwright.config.ts) is present. UI tests will be placed in the 'tests' directory.

# Animation Logic
- Star and meteor (falling star) animations are implemented in src/components/Background.tsx, with data generated by src/utils/gameUtils.ts.
- Animation keyframes and utility classes are defined in src/index.css.

# Next Steps
- Refine the falling star (meteor) animation in Background.tsx and related CSS.
- Add Playwright config and a basic UI test for visual review.

# Recent Changes
- Refined the falling star (meteor) animation in src/components/Background.tsx to use a glowing head and fading tail, with a more natural diagonal path.
- Added a new CSS class and keyframes (animate-meteor-refined, meteor-refined) in src/index.css for the improved shooting star effect.
- Updated StardustCounter panel in src/components/StardustCounter.tsx to be less boxy, more glassy, and better blended with the background.
- Falling star (meteor) animation now only uses a glowing orb for each meteor—no trail or line, just a soft, glowing head.
- Backdrop-blur has been removed from the StardustCounter panel for a cleaner look.
- StardustCounter panel is now fully transparent and non-boxy, blending seamlessly with the background.
- Falling stars (meteors) are now simple, small, twinkling white dots (2-4px), with no glow, trail, or orb effect.
- Fixed duplicate key warning in src/components/RushEventsPanel.tsx by using event.id + '-' + event.startedAt as the key for active events.
- Improved black hole rush event animation in src/components/RushEventAnimation.tsx: now perfectly centered and sized to match the clicker, with a swirling accretion disk, intense circular glow, and a more realistic black hole core.
- Improved meteor rush event animation in src/components/RushEventAnimation.tsx: meteors are now more visible, animate smoothly, and the animation is properly cleaned up when the event ends. 

# Rush Event Animation Overhaul (2024-06)
- Completely rebuilt `src/components/RushEventAnimation.tsx` to use HTML canvas for both meteor shower and black hole rush events.
- **Meteor Shower:** Now features glowing, diagonal meteors with fading trails, randomized color (white, blue, orange), and cosmic glow. Meteors streak from random positions at the top, at a -30° angle, and fade out as they exit the screen. All animation state and timers are cleaned up immediately when the event ends.
- **Black Hole Rift:** Now perfectly centered on the screen, with a swirling accretion disk (animated with color and glow), an intense circular glow, and a realistic black hole core. Uses canvas for smooth, modern animation. All animation state and timers are cleaned up immediately when the event ends.
- All rush event animations are now visually impressive, cosmic-feeling, and strictly tied to the event lifecycle for performance and polish. 
